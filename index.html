<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Catch the Oranges</title>

  <!-- Mobile friendly -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
  body {
    margin: 0;
    background: white;
    text-align: center;
    font-family: Arial, sans-serif;
  }
  canvas {
    background: white;
    border: 1px solid #ccc;
    touch-action: none;
  }
</style>

</head>

<body>

<h2>üçä Catch the Oranges üçä</h2>
<p>Drag to move the character</p>

<canvas id="game" width="360" height="480"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Images
const playerImg = new Image();
playerImg.src = "player.png";

const orangeImg = new Image();
orangeImg.src = "orange.png";

// Sound
const catchSound = new Audio();
catchSound.src = "catch.mp3";
catchSound.preload = "auto";
let soundUnlocked = false;

function unlockSound() {
  if (!soundUnlocked) {
    catchSound.play().then(() => {
      catchSound.pause();
      catchSound.currentTime = 0;
      soundUnlocked = true;
    }).catch(() => {});
  }
}


document.addEventListener("click", unlockSound, { once: true });
document.addEventListener("touchstart", unlockSound, { once: true });


// Player
const player = {
  x: 150,
  y: 380,
  width: 100,
  height: 100
};

// Orange
let orange = {
  x: Math.random() * 300,
  y: -40,
  size: 40,
  speed: 3
};

let score = 0;

// TOUCH CONTROL (mobile)
canvas.addEventListener("touchmove", e => {
  const rect = canvas.getBoundingClientRect();
  player.x = e.touches[0].clientX - rect.left - player.width / 2;
});

// MOUSE CONTROL (desktop)
canvas.addEventListener("mousemove", e => {
  if (e.buttons === 1) {
    const rect = canvas.getBoundingClientRect();
    player.x = e.clientX - rect.left - player.width / 2;
  }
});

// Game logic
function update() {
  orange.y += orange.speed;

  // Collision
  if (
    orange.x < player.x + player.width &&
    orange.x + orange.size > player.x &&
    orange.y < player.y + player.height &&
    orange.y + orange.size > player.y
  ) {
    score++;
    if (soundUnlocked) {
  catchSound.currentTime = 0;
  catchSound.play();
}


    orange.y = -40;
    orange.x = Math.random() * (canvas.width - orange.size);
  }

  // Reset if missed
  if (orange.y > canvas.height) {
    orange.y = -40;
    orange.x = Math.random() * (canvas.width - orange.size);
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
  ctx.drawImage(orangeImg, orange.x, orange.y, orange.size, orange.size);

  ctx.fillStyle = "black";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, 10, 30);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
